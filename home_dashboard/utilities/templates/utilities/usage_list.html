{% extends 'base.html' %}
{% load static %}

{% block main %}

    <main role="main" class="container">

		<div class="card">
            <div class="row">
                <div class="col">
                    <div class="btn-group" role="group">
                        <a href="{% url 'utilities:usage_list' %}" class="btn btn-secondary" id="meter_all">All</a>
                        {% for m in meters %}
                            <a href="{% url 'utilities:usage_list' %}?m_id={{ m.id }}" class="btn btn-secondary" id="meter_{{m.id}}">{{ m.meter_name }}</a>
                        {% endfor %}
                    </div>
                </div>
            </div>
			<table class="table table-hover">
				<thead>
                    <th>Year</th>
                    <th>Month</th>
					<th>Meter name</th>
                    <th>Usage</th>
					<th>Unit</th>
				</thead>
				<tbody>
					{% for r in object_list %}
                        <tr>
					        <td>{{ r.year }}</td>
                            <td>{{ r.month }}</td>
					        <td>{{ r.meter.meter_name }}</td>
                            <td>{{ r.usage }}</td>
					        <td>{{ r.meter.meter_unit }}</td>
                        </tr>
					{% empty %}
                        <tr>
					        <td colspan=5>No usages yet</td>
                        </tr>
					{% endfor %}
				</tbody>
			</table>
		</div>

    </main>

{% endblock %}

{% block script %}
        <script>
            {% if request.GET.m_id %}
                var active_meter = {{ request.GET.m_id }};
                $('#meter_' + active_meter ).removeClass('btn-secondary').addClass('btn-primary');
            {% else %}
                $('#meter_all').removeClass('btn-secondary').addClass('btn-primary');
            {% endif %}
        </script>
{% endblock %}
